(this["webpackJsonpws-playground"]=this["webpackJsonpws-playground"]||[]).push([[0],{117:function(e,t,c){},118:function(e,t,c){},190:function(e,t,c){},192:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),s=c(23),i=c.n(s),l=(c(117),c(41)),r=c(61),j=c(36),o=c(195),b=c(197),d=c(56),O=c(199),u=c(198),h=c(106),m=c(196),x=c(201),p=c(200),f=c(110),g=c(202),v=c(203),k=(c(118),c(7)),w=u.a.Panel;var y=function(e){var t=e.url,c=e.id,a=e.add,s=e.remove,i=Object(n.useState)(),o=Object(j.a)(i,2),y=o[0],N=o[1],S=Object(n.useState)(""),C=Object(j.a)(S,2),I=C[0],D=C[1],R=Object(n.useState)([]),A=Object(j.a)(R,2),E=A[0],J=A[1],M=Object(n.useState)([]),T=Object(j.a)(M,2),L=T[0],B=T[1],P=Object(n.useState)({connected:!1}),U=Object(j.a)(P,2),W=U[0],q=U[1],z=function(){y&&(y.close(),N(void 0))};return Object(n.useEffect)((function(){y||N(new WebSocket(t))}),[]),Object(n.useEffect)((function(){y&&(y.onopen=function(e){console.log({time:(new Date).valueOf(),e:e}),q(Object(l.a)(Object(l.a)({},W),{},{connected:!0}))},y.onclose=function(e){console.log({time:(new Date).valueOf(),e:e}),q(Object(l.a)(Object(l.a)({},W),{},{connected:!1}))},y.onmessage=function(e){B([{text:e.data,timestamp:e.timeStamp,key:Object(O.a)()}].concat(Object(r.a)(L)))})})),Object(k.jsx)("div",{className:"websocket-header-wrapper",children:Object(k.jsxs)(m.a,{ghost:!1,tags:W.connected?Object(k.jsx)(x.a,{color:"green",children:"Online"}):Object(k.jsx)(x.a,{color:"red",children:"Offline"}),className:"websocket-header",title:"".concat(c),extra:[Object(k.jsx)("span",{children:y?Object(k.jsx)(d.a,{type:"primary",danger:!0,onClick:z,icon:Object(k.jsx)(f.a,{}),disabled:!W.connected,children:"Close"}):Object(k.jsx)(d.a,{type:"primary",danger:!0,onClick:function(){z(),s(c)},icon:Object(k.jsx)(g.a,{}),children:"Remove"})}),Object(k.jsx)(d.a,{onClick:function(){return a(t)},icon:Object(k.jsx)(v.a,{}),children:"Duplicate"})],children:[Object(k.jsxs)(p.b,{small:"small",column:3,children:[Object(k.jsx)(p.b.Item,{label:"URL",children:Object(k.jsx)("b",{children:t})}),Object(k.jsx)(p.b.Item,{label:"Total Sent",children:E.length}),Object(k.jsx)(p.b.Item,{label:"Total Received",children:L.length}),Object(k.jsx)(p.b.Item,{label:"Last received",children:L.length>0?L[0].text:""})]}),Object(k.jsxs)("div",{className:"websocket-input-wrapper",children:[Object(k.jsxs)("div",{className:"websocket-input-container",children:[Object(k.jsx)(b.a.TextArea,{className:"websocket-input",name:"Message...",type:"text",value:I,disabled:!W.connected,onChange:function(e){return D(e.target.value)}}),Object(k.jsx)(d.a,{className:"websocket-input-send",onClick:function(){W.connected?(y.send(JSON.stringify(I.trim())),J([].concat(Object(r.a)(E),[{text:I.trim(),timestamp:(new Date).valueOf(),key:Object(O.a)()}])),D("")):h.b.error("Couldn't send message: Connection not opened (yet)")},type:"primary",disabled:!W.connected,children:"Send"})]}),Object(k.jsxs)("div",{className:"websocket-input-length-counter",children:["Message length: ",I.trim().length]})]}),Object(k.jsxs)(u.a,{ghost:!0,children:[Object(k.jsx)(w,{header:"Received messages",children:Object(k.jsx)("div",{className:"message-display",children:L.length>0?L.map((function(e){return Object(k.jsxs)("div",{children:[Object(k.jsx)("samp",{children:e.text}),Object(k.jsx)("br",{})]})})):""})}),Object(k.jsx)(w,{header:"Sent messages",children:Object(k.jsx)("div",{className:"message-display",children:E.length>0?E.map((function(e){return Object(k.jsxs)("div",{children:[Object(k.jsx)("samp",{children:e.text}),Object(k.jsx)("br",{})]})})):""})})]})]})})},N=(c(190),o.a.Content);var S=function(){var e=Object(n.useState)("ws://localhost:8999/connection"),t=Object(j.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)([]),i=Object(j.a)(s,2),u=i[0],h=i[1],m=function(e){return h([{url:e,id:Object(O.a)(),key:Object(O.a)()}].concat(Object(r.a)(u)))},x=function(e){return h(u.filter((function(t){return t.id!==e})))};return Object(k.jsx)("div",{className:"App",children:Object(k.jsx)(o.a,{className:"layout",children:Object(k.jsxs)(N,{className:"content",children:[Object(k.jsxs)("div",{className:"url-input-container",children:[Object(k.jsx)(b.a,{className:"url-input",value:c,onChange:function(e){return a(e.target.value)}}),Object(k.jsx)(d.a,{className:"url-input-add",onClick:function(){return m(c)},children:"Add connection"})]}),Object(k.jsx)("div",{className:"table",children:u.map((function(e){return Object(k.jsx)(y,Object(l.a)(Object(l.a)({},e),{},{add:m,remove:x}))}))})]})})})};c(191);i.a.render(Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(S,{})}),document.getElementById("root"))}},[[192,1,2]]]);
//# sourceMappingURL=main.eed87733.chunk.js.map